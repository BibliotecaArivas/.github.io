<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Servicios Fijos</title>

<style>
/* ===== RESET ===== */
*{
    box-sizing:border-box;
    margin:0;
    padding:0;
    font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

/* ===== BODY ===== */
body{
    background:linear-gradient(180deg,#eef2f7,#f8fafc);
    color:#1f2937;
    font-size:13.5px;
    line-height:1.6;
}

/* ===== LAYOUT ===== */
.layout{
    display:flex;
    min-height:100vh;
}

/* ===== SIDEBAR ===== */
.nav{
    width:260px;
    background:#ffffff;
    border-right:1px solid #e5e7eb;
    padding:20px 0;
}

.nav h2{
    text-align:center;
    margin-bottom:20px;
    font-size:16px;
    color:#1e3a8a;
}

.list{
    list-style:none;
}

.list__button{
    display:flex;
    align-items:center;
    gap:10px;
    padding:12px 20px;
    cursor:pointer;
    color:#303440;
}

.list__button:hover{
    background:#f1f5f9;
}

.nav__link{
    text-decoration:none;
    color:#303440;
    flex:1;
}

.list__arrow{
    margin-left:auto;
    transition:transform .3s;
}

.arrow .list__arrow{
    transform:rotate(90deg);
}

.list__show{
    list-style:none;
    height:0;
    overflow:hidden;
    transition:height .3s ease;
}

.nav__link--inside{
    display:block;
    padding:10px 40px;
    color:#475569;
}

.nav__link--inside:hover{
    background:#f8fafc;
}

/* ===== CONTENT ===== */
.main{
    flex:1;
    padding:40px;
}

.container{
    max-width:820px;
    background:#ffffff;
    padding:35px 40px;
    border-radius:14px;
    box-shadow:0 20px 40px rgba(0,0,0,0.08);
    border:1px solid #e5e7eb;
    margin:auto;
}

h1{
    text-align:center;
    margin-bottom:20px;
    color:#2c3e50;
}

/* ===== INFO ===== */
.info-box{
    background:#e8f4fd;
    border-left:5px solid #3498db;
    padding:15px;
    border-radius:8px;
    margin-bottom:20px;
}

/* ===== FORM ===== */
label{
    font-weight:600;
    margin-bottom:6px;
    display:block;
}

input,select{
    width:100%;
    padding:12px;
    border-radius:8px;
    border:1px solid #cbd5e1;
    margin-bottom:15px;
}

.question{
    background:#f8fafc;
    padding:15px;
    border-radius:8px;
    margin-bottom:15px;
}

.buttons{
    display:flex;
    justify-content:center;
    gap:15px;
}

button{
    padding:12px 25px;
    border:none;
    border-radius:8px;
    font-weight:700;
    cursor:pointer;
}

#printBtn{background:#3498db;color:#fff;}
#resetBtn{background:#e74c3c;color:#fff;}

.validation-message{
    margin-top:15px;
    text-align:center;
    font-weight:bold;
}

.success{color:#155724;}
.error{color:#721c24;}

/* ===== RESPONSIVE ===== */
@media(max-width:900px){
    .layout{flex-direction:column;}
    .nav{width:100%;border-right:none;border-bottom:1px solid #e5e7eb;}
    .main{padding:20px;}
    .container{padding:25px 20px;}
}
</style>
</head>

<body>

<div class="layout">

<!-- ===== SIDEBAR ===== -->
<nav class="nav">
<h2>Menú</h2>
<ul class="list">

<li>
    <div class="list__button">
        <a href="#" class="nav__link">Inicio</a>
    </div>
</li>

<li>
    <div class="list__button list__button--click">
        <a href="#" class="nav__link">Preguntas de seguridad</a>
        <span class="list__arrow">▶</span>
    </div>
    <ul class="list__show">
        <li><a class="nav__link--inside" href="preguntas_de_seguridad_servicios_fijos.html">Servicios Fijos</a></li>
        <li><a class="nav__link--inside" href="preguntas_de_seguridad_servicios_moviles.html">Servicios Móviles</a></li>
        
    </ul>
</li>

<li>
    <div class="list__button list__button--click">
        <a href="#" class="nav__link">Gestiones</a>
        <span class="list__arrow">▶</span>
    </div>
    <ul class="list__show">
        <li><a class="nav__link--inside" href="escenarios_comunes_para_retiro_de_servicios.html" target="_blank">Escenarios comunes in</a></li>
        <li><a class="nav__link--inside" href="#"></a></li>
    </ul>
</li>

<li>
    <div class="list__button list__button--click">
        <a href="#" class="nav__link">Info</a>
        <span class="list__arrow">▶</span>
    </div>
    <ul class="list__show">
        <li><a class="nav__link--inside" href="Formas_de_Pago_y_Periodos_de_facturacion.html">Ciclo de facturación</a></li>
        <li><a class="nav__link--inside" href="empresa.html">Documentos empresas</a></li>
    </ul>
</li>

</ul>
</nav>

<!-- ===== CONTENT ===== -->
<main class="main">
<div class="container">

<h1>Servicios Fijos</h1>

<div class="info-box">
<strong>Importante:</strong> El titular debe responder correctamente al menos 3 de las 5 preguntas de seguridad para completar la validación.
</div>

<label>Nombre del titular:</label>
<input type="text" id="nombreTitular">

<div class="question">1. ¿Me puede confirmar cuál es el medio de pago que mantiene registrado para su servicio por favor?
<input type="text" id="pregunta1"></div>

<div class="question">2. Verifico en el sistema que Usted se ha comunicado con nosotros, por favor confírmeme en qué mes lo realizó, sin contar esta llamada.
<input type="text" id="pregunta2"></div>

<div class="question">3. ¿Me confirma por favor si en el último mes Ud. ha generado alguna visita técnica, Sí o No?
<select id="pregunta3">
<option value="">Seleccione</option>
<option>Sí</option>
<option>No</option>
</select></div>

<div class="question">4. ¿Me confirma el motivo por el cual Ud. generó la visita técnica por favor?
<input type="text" id="pregunta4"></div>

<div class="question">5. ¿Cuál es el correo electrónico donde recibe su factura digital?
<input type="email" id="pregunta5"></div>

<div id="validationMessage" class="validation-message"></div>

<div class="buttons">
<button id="printBtn">Guardar TXT</button>
<button id="resetBtn">Limpiar</button>
</div>

</div>
</main>

</div>

<script>
     document.addEventListener('DOMContentLoaded', function() {
            const printBtn = document.getElementById('printBtn');
            const resetBtn = document.getElementById('resetBtn');
            const validationMessage = document.getElementById('validationMessage');
            
            // Función para validar las respuestas
            function validarRespuestas() {
                const nombreTitular = document.getElementById('nombreTitular').value.trim();
                const respuestas = [
                    document.getElementById('pregunta1').value.trim(),
                    document.getElementById('pregunta2').value.trim(),
                    document.getElementById('pregunta3').value,
                    document.getElementById('pregunta4').value.trim(),
                    document.getElementById('pregunta5').value.trim()
                ];
                
                // Validar que se haya ingresado el nombre
                if (nombreTitular === '') {
                    validationMessage.textContent = 'Por favor, ingrese el nombre del titular.';
                    validationMessage.className = 'validation-message error';
                    return false;
                }
                
                // Contar respuestas válidas
                let respuestasValidas = 0;
                for (let i = 0; i < respuestas.length; i++) {
                    if (respuestas[i] !== '') {
                        respuestasValidas++;
                    }
                }
                
                // Verificar si hay al menos 3 respuestas
                if (respuestasValidas < 3) {
                    validationMessage.textContent = 'Debe responder al menos 3 de las 5 preguntas de seguridad.';
                    validationMessage.className = 'validation-message error';
                    return false;
                }
                
                validationMessage.textContent = 'Validación exitosa. Puede proceder a imprimir.';
                validationMessage.className = 'validation-message success';
                return true;
            }
            
            // Función para generar el contenido del archivo TXT
            function generarContenidoTXT() {
                const nombreTitular = document.getElementById('nombreTitular').value;
                const preguntas = [
                    "1. ¿Me puede confirmar cuál es el medio de pago que mantiene registrado para su servicio por favor?",
                    "2. Verifico en el sistema que Usted se ha comunicado con nosotros, por favor confírmeme en qué mes lo realizó, sin contar esta llamada.",
                    "3. ¿Me confirma por favor si en el último mes Ud. ha generado alguna visita técnica, Sí o No?",
                    "4. ¿Me confirma el motivo por el cual Ud. generó la visita técnica por favor?",
                    "5. ¿Cuál es el correo electrónico donde recibe su factura digital?"
                ];
                
                const respuestas = [
                    document.getElementById('pregunta1').value,
                    document.getElementById('pregunta2').value,
                    document.getElementById('pregunta3').value,
                    document.getElementById('pregunta4').value,
                    document.getElementById('pregunta5').value
                ];
                
                let contenido = `VALIDACIÓN DE SERVICIOS FIJOS\n`;
                contenido += `==============================\n\n`;
                contenido += `Fecha: ${new Date().toLocaleString()}\n`;
                contenido += `Nombre del titular: ${nombreTitular}\n\n`;
                contenido += `RESPUESTAS A PREGUNTAS DE SEGURIDAD:\n`;
                contenido += `------------------------------------\n\n`;
                
                for (let i = 0; i < preguntas.length; i++) {
                    contenido += `${preguntas[i]}\n`;
                    contenido += `Respuesta: ${respuestas[i] || 'No respondida'}\n\n`;
                }
                
                return contenido;
            }
            
            // Función para guardar como archivo TXT
            function guardarTXT(contenido, nombreArchivo) {
                const blob = new Blob([contenido], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = nombreArchivo;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }
            
            // Evento para el botón de imprimir/guardar
            printBtn.addEventListener('click', function() {
                if (validarRespuestas()) {
                    const contenido = generarContenidoTXT();
                    const nombreTitular = document.getElementById('nombreTitular').value.replace(/\s+/g, '_');
                    const fecha = new Date().toISOString().slice(0, 10);
                    const nombreArchivo = `Validacion_Servicios_${nombreTitular}_${fecha}.txt`;
                    
                    // Guardar como TXT
                    guardarTXT(contenido, nombreArchivo);
                    
                    // También abrir diálogo de impresión
                   
                }
            });
            
            // Evento para el botón de limpiar
            resetBtn.addEventListener('click', function() {
                document.getElementById('nombreTitular').value = '';
                document.getElementById('pregunta1').value = '';
                document.getElementById('pregunta2').value = '';
                document.getElementById('pregunta3').value = '';
                document.getElementById('pregunta4').value = '';
                document.getElementById('pregunta5').value = '';
                validationMessage.textContent = '';
                validationMessage.className = 'validation-message';
            });
        });


document.querySelectorAll(".list__button--click").forEach(btn=>{
    btn.addEventListener("click",()=>{
        btn.classList.toggle("arrow");
        let menu = btn.nextElementSibling;
        menu.style.height = menu.style.height ? null : menu.scrollHeight+"px";
    });
});
</script>

</body>
</html>
