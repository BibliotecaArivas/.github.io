<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Servicios Fijos</title>

<style>
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

/* ===== MENU ===== */
header {
    background: linear-gradient(135deg, #2c3e50, #3498db);
    padding: 15px 20px;
    position: sticky;
    top: 0;
    z-index: 1000;
}

.navbar {
    max-width: 1200px;
    margin: auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.logo {
    color: #fff;
    font-size: 22px;
    font-weight: bold;
}

.menu {
    list-style: none;
    display: flex;
    gap: 20px;
}

.menu li {
    position: relative;
}

.menu a {
    color: #fff;
    text-decoration: none;
    padding: 8px 12px;
    font-weight: 500;
    border-radius: 5px;
    display: block;
}

.menu a:hover {
    background: rgba(255,255,255,0.15);
}

/* SUBMENUS */
.submenu {
    display: none;
    position: absolute;
    top: 45px;
    left: 0;
    background: #ffffff;
    min-width: 180px;
    border-radius: 8px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    overflow: hidden;
}

.submenu a {
    color: #2c3e50;
    padding: 12px;
}

.submenu a:hover {
    background: #f0f2f5;
}

.has-submenu:hover .submenu {
    display: block;
}

/* BOTÓN MOBILE */
.menu-toggle {
    display: none;
    font-size: 26px;
    color: white;
    cursor: pointer;
}

/* ===== BODY ===== */
body {
    background: #f5f7fa;
}

.container {
    max-width: 800px;
    margin: 40px auto;
    background: white;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    padding: 30px;
}

h1 {
    text-align: center;
    margin-bottom: 20px;
    color: #2c3e50;
}

.info-box {
    background: #e8f4fd;
    border-left: 5px solid #3498db;
    padding: 15px;
    margin-bottom: 20px;
    border-radius: 6px;
}

label {
    font-weight: 600;
    margin-bottom: 6px;
    display: block;
}

input, select {
    width: 100%;
    padding: 12px;
    margin-bottom: 15px;
    border-radius: 6px;
    border: 1px solid #ccc;
}

input:focus, select:focus {
    outline: none;
    border-color: #3498db;
}

.question {
    background: #f8f9fa;
    padding: 15px;
    border-radius: 6px;
    margin-bottom: 15px;
}

.buttons {
    display: flex;
    justify-content: center;
    gap: 15px;
}

button {
    padding: 12px 25px;
    border: none;
    border-radius: 6px;
    font-weight: bold;
    cursor: pointer;
}

#printBtn {
    background: #3498db;
    color: white;
}

#resetBtn {
    background: #e74c3c;
    color: white;
}

.validation-message {
    margin-top: 15px;
    text-align: center;
    font-weight: bold;
}

.success { color: #155724; }
.error { color: #721c24; }

/* ===== RESPONSIVE ===== */
@media (max-width: 768px) {
    .menu {
        position: absolute;
        top: 65px;
        right: 0;
        background: #2c3e50;
        flex-direction: column;
        width: 240px;
        padding: 15px;
        display: none;
        border-radius: 0 0 0 10px;
    }

    .menu.active {
        display: flex;
    }

    .submenu {
        position: static;
        background: #34495e;
        box-shadow: none;
        margin-top: 5px;
        display: none;
    }

    .submenu a {
        color: white;
        padding-left: 20px;
    }

    .has-submenu.active .submenu {
        display: block;
    }

    .menu-toggle {
        display: block;
    }

    .buttons {
        flex-direction: column;
    }
}
</style>
</head>

<body>

<header>
<nav class="navbar">
    <div class="logo">Servicios Fijos</div>

    <div class="menu-toggle" onclick="toggleMenu()">☰</div>

    <ul class="menu" id="menu">
        <li><a href="#">Inicio</a></li>

        <li class="has-submenu">
            <a href="#">Preguntas de Seguridad ▾</a>
            <ul class="submenu">
                <li><a href="preguntas_de_seguridad_servicios_fijos.html">Servicios Fijos</a></li>
                <li><a href="preguntas_de_seguridad_servicios_moviles.html">Servicios Móviles</a></li>
                <li><a href="empresa.html">Empresas</a></li>
            </ul>
        </li>

        <li class="has-submenu">
            <a href="#">Gestiones ▾</a>
            <ul class="submenu">
                <li><a href="#"></a></li>
                <li><a href="#"></a></li>
                <li><a href="#"></a></li>
            </ul>
        </li>

        <li class="has-submenu">
            <a href="#">Info ▾</a>
            <ul class="submenu">
                <li><a href="Formas_de_Pago_y_Periodos_de_facturacion.html" target="_blank">Ciclo Período de facturación</a></li>
                <li><a href="#"></a></li>
            </ul>
        </li>

        <li><a href="#"></a></li>
    </ul>
</nav>
</header>

<div class="container">
<h1>Servicios Fijos</h1>

<div class="info-box">
    <strong>Importante:</strong> El titular debe responder correctamente al menos 3 de las 5 preguntas de seguridad para completar la validación.</div>

<label>Nombre del titular</label>
<input type="text" id="nombreTitular">

<div class="question">
    <div class="question-text">1. ¿Me puede confirmar cuál es el medio de pago que mantiene registrado para su servicio por favor?</div>
    <input type="text" id="pregunta1">
</div>

<div class="question">
    <div class="question-text">2. Verifico en el sistema que Usted se ha comunicado con nosotros, por favor confírmeme en qué mes lo realizó, sin contar esta llamada.
</div>
    <input type="text" id="pregunta2">
</div>

<div class="question">
    <div class="question-text">3. ¿Me confirma por favor si en el último mes Ud. ha generado alguna visita técnica, Sí o No?
</div>
    <select id="pregunta3">
        <option value="">Seleccione</option>
        <option>Sí</option>
        <option>No</option>
    </select>
</div>

<div class="question">
    <div class="question-text">4. ¿Me confirma el motivo por el cual Ud. generó la visita técnica por favor?
</div>
    <input type="text" id="pregunta4">
</div>

<div class="question">
    <div class="question-text">4. ¿Me confirma el motivo por el cual Ud. generó la visita técnica por favor?
</div>
    <input type="email" id="pregunta5">
</div>

<div id="validationMessage" class="validation-message"></div>

<div class="buttons">
    <button id="printBtn">Guardar TXT</button>
    <button id="resetBtn">Limpiar</button>
</div>
</div>

<script>
     document.addEventListener('DOMContentLoaded', function() {
            const printBtn = document.getElementById('printBtn');
            const resetBtn = document.getElementById('resetBtn');
            const validationMessage = document.getElementById('validationMessage');
            
            // Función para validar las respuestas
            function validarRespuestas() {
                const nombreTitular = document.getElementById('nombreTitular').value.trim();
                const respuestas = [
                    document.getElementById('pregunta1').value.trim(),
                    document.getElementById('pregunta2').value.trim(),
                    document.getElementById('pregunta3').value,
                    document.getElementById('pregunta4').value.trim(),
                    document.getElementById('pregunta5').value.trim()
                ];
                
                // Validar que se haya ingresado el nombre
                if (nombreTitular === '') {
                    validationMessage.textContent = 'Por favor, ingrese el nombre del titular.';
                    validationMessage.className = 'validation-message error';
                    return false;
                }
                
                // Contar respuestas válidas
                let respuestasValidas = 0;
                for (let i = 0; i < respuestas.length; i++) {
                    if (respuestas[i] !== '') {
                        respuestasValidas++;
                    }
                }
                
                // Verificar si hay al menos 3 respuestas
                if (respuestasValidas < 3) {
                    validationMessage.textContent = 'Debe responder al menos 3 de las 5 preguntas de seguridad.';
                    validationMessage.className = 'validation-message error';
                    return false;
                }
                
                validationMessage.textContent = 'Validación exitosa. Puede proceder a imprimir.';
                validationMessage.className = 'validation-message success';
                return true;
            }
            
            // Función para generar el contenido del archivo TXT
            function generarContenidoTXT() {
                const nombreTitular = document.getElementById('nombreTitular').value;
                const preguntas = [
                    "1. ¿Me puede confirmar cuál es el medio de pago que mantiene registrado para su servicio por favor?",
                    "2. Verifico en el sistema que Usted se ha comunicado con nosotros, por favor confírmeme en qué mes lo realizó, sin contar esta llamada.",
                    "3. ¿Me confirma por favor si en el último mes Ud. ha generado alguna visita técnica, Sí o No?",
                    "4. ¿Me confirma el motivo por el cual Ud. generó la visita técnica por favor?",
                    "5. ¿Cuál es el correo electrónico donde recibe su factura digital?"
                ];
                
                const respuestas = [
                    document.getElementById('pregunta1').value,
                    document.getElementById('pregunta2').value,
                    document.getElementById('pregunta3').value,
                    document.getElementById('pregunta4').value,
                    document.getElementById('pregunta5').value
                ];
                
                let contenido = `VALIDACIÓN DE SERVICIOS FIJOS\n`;
                contenido += `==============================\n\n`;
                contenido += `Fecha: ${new Date().toLocaleString()}\n`;
                contenido += `Nombre del titular: ${nombreTitular}\n\n`;
                contenido += `RESPUESTAS A PREGUNTAS DE SEGURIDAD:\n`;
                contenido += `------------------------------------\n\n`;
                
                for (let i = 0; i < preguntas.length; i++) {
                    contenido += `${preguntas[i]}\n`;
                    contenido += `Respuesta: ${respuestas[i] || 'No respondida'}\n\n`;
                }
                
                return contenido;
            }
            
            // Función para guardar como archivo TXT
            function guardarTXT(contenido, nombreArchivo) {
                const blob = new Blob([contenido], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = nombreArchivo;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }
            
            // Evento para el botón de imprimir/guardar
            printBtn.addEventListener('click', function() {
                if (validarRespuestas()) {
                    const contenido = generarContenidoTXT();
                    const nombreTitular = document.getElementById('nombreTitular').value.replace(/\s+/g, '_');
                    const fecha = new Date().toISOString().slice(0, 10);
                    const nombreArchivo = `Validacion_Servicios_${nombreTitular}_${fecha}.txt`;
                    
                    // Guardar como TXT
                    guardarTXT(contenido, nombreArchivo);
                    
                    // También abrir diálogo de impresión
                   
                }
            });
            
            // Evento para el botón de limpiar
            resetBtn.addEventListener('click', function() {
                document.getElementById('nombreTitular').value = '';
                document.getElementById('pregunta1').value = '';
                document.getElementById('pregunta2').value = '';
                document.getElementById('pregunta3').value = '';
                document.getElementById('pregunta4').value = '';
                document.getElementById('pregunta5').value = '';
                validationMessage.textContent = '';
                validationMessage.className = 'validation-message';
            });
        });

function toggleMenu() {
    document.getElementById("menu").classList.toggle("active");
}

document.querySelectorAll(".has-submenu > a").forEach(item => {
    item.addEventListener("click", function(e) {
        if (window.innerWidth <= 768) {
            e.preventDefault();
            this.parentElement.classList.toggle("active");
        }
    });
});
</script>

</body>
</html>
